(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),u=t(1),o=t(4),i=t.n(o),s="/api/persons",l={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},edit:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},h=t(0),d=function(e){var n=e.data,t=e.handleDelete;return Object(h.jsxs)("p",{children:[n.name," / ",n.number," / ",Object(h.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})]})},j=function(e){var n=e.contacts,t=e.searchTerm,c=e.handleDelete;return Object(h.jsx)(h.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(h.jsx)(d,{data:e,handleDelete:c},e.name)}))})},b=function(e){var n=e.searchTerm,t=e.onChange;return Object(h.jsxs)("div",{children:["Search: ",Object(h.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.newName,t=e.newNumber,c=e.handleSubmit,r=e.handleNameChange,a=e.handleNumberChange;return Object(h.jsxs)("form",{onSubmit:c,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:n,onChange:r})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:t,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})},m=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"message",children:Object(h.jsx)("h3",{children:n})})},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),o=Object(a.a)(r,2),i=o[0],s=o[1],d=Object(u.useState)(""),O=Object(a.a)(d,2),v=O[0],x=O[1],g=Object(u.useState)(""),p=Object(a.a)(g,2),w=p[0],C=p[1],N=Object(u.useState)(null),S=Object(a.a)(N,2),T=S[0],A=S[1];Object(u.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{message:T}),Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(b,{searchTerm:w,onChange:function(e){C(e.target.value)}}),Object(h.jsx)("h2",{children:"Add new contact"}),Object(h.jsx)(f,{newNumber:v,newName:i,handleSubmit:function(e){e.preventDefault();var n={name:i,number:v};if(t.some((function(e){return e.name===i}))){var r=t.filter((function(e){return e.name===i}));if(window.confirm("".concat(i," already exists in your phonebook. Want to update their number?")))return l.edit(r[0].id,n).then((function(e){A("Changed number of ".concat(e.name,"!")),setTimeout((function(){A(null)}),5e3),l.getAll().then((function(e){c(e)}))})).catch((function(e){A("Information of the person you tried to edit has already been removed from the server!"),setTimeout((function(){A(null)}),5e3),console.error("ERROR",e)}))}l.create(n).then((function(e){c(t.concat(e)),A("Added ".concat(e.name,"!")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){A("".concat(e.response.data.error)),setTimeout((function(){A(null)}),5e3)}))},handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(j,{contacts:t,searchTerm:w,handleDelete:function(e){window.confirm("Are you sure?")&&l.remove(e).then((function(e){A("Deleted a contact!"),setTimeout((function(){A(null)}),5e3),l.getAll().then((function(e){c(e)}))}))}})]})};t(38);r.a.render(Object(h.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fc10c2f6.chunk.js.map